<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>麦子易商产品管理分析平台</title>
  <link rel="stylesheet" href="layui/css/layui.css" media="all">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.css">
</head>

<body class="layui-layout-body" style="height: 100%;">
  <div class="layui-layout layui-layout-admin" style='height: 99%;'>
    <div class="layui-header" style="background-color: white;">
      <div class="layui-logo">
        <img src='icon/T-1.jpg' width="200px" height="60px" style="margin-top:-1px">
      </div>
      <ul class="layui-nav layui-layout-left">
        <li class="layui-nav-item">
          <div class="demoTable">
            <button class="layui-btn" data-type="reload" style='background-color: white;'>
              <img src="icon/icon-ss.png">
            </button>
            <div class="layui-inline">
              <input class="layui-input" name="id" id="demoReload" autocomplete="off" placeholder="搜索">
            </div>
          </div>
        </li>
      </ul>
      <ul class="layui-nav layui-layout-right">
        <li class="layui-nav-item">
          <a href="userSetting.html" style='color:black'>
            <img src='icon/icon-sz.png' style="margin-top:-2px;">
            设置管理
          </a>
        </li>
        <li class="layui-nav-item">
          <a href="javascript:;" style=' color:black'>
            <img src="http://t.cn/RCzsdCq" class="layui-nav-img">
            username
            <img src='icon/icon-xx.png'>
          </a>
          <dl class="layui-nav-child">
            <dd><a href="userSetting.html">基本资料</a></dd>
            <dd><a href="userInfo.html">安全设置</a></dd>
          </dl>
        </li>
      </ul>
    </div>
    <div class="layui-side layui-bg-black">
      <div class="layui-side-scroll" style='background-color: white;'>
        <ul class="layui-nav layui-nav-tree" lay-filter="test" style="margin-top:20px;background-color: white;"
          id='ulist'>
          <li class="layui-nav-item" value='date.html'><a style='color:black;margin:10px 0 10px 0;'>
              <img src='icon/icon-bbgx.png' style="margin:-5px 0 0 -10px;"> 数据总览</a></li>
          <li class="layui-nav-item" value='updata.html'><a style='color:black;margin:10px 0 10px 0;'>
              <img src='icon/icon-bbgx-1.png' style="margin:-5px 0 0 -10px;"> 版本/更新升级</a></li>
          <li class="layui-nav-item"><a style='color:black;margin:10px 0 10px 0;'>
              <img src='icon/icon-sy-1.png' style="margin:-5px 0 0 -10px;"> 收银/结算/付款/查找</a></li>
          <li class="layui-nav-item"><a style='color:black;margin:10px 0 10px 0;'>
              <img src='icon/icon-gnym-1.png' style="margin:-5px 0 0 -10px;"> 功能界面/操作模块</a></li>
          <li class="layui-nav-item"><a style='color:black;margin:10px 0 10px 0;'>
              <img src='icon/icon-sjxz-1.png' style="margin:-5px 0 0 -10px;"> 下载数据/上传数据</a></li>
          <li class="layui-nav-item" value='index.html'><a style='color:black;margin:10px 0 10px 0;'>
              <img src='icon/icon-tc-1.png' style="margin:-5px 0 0 -10px;"> 登录/注销退出</a></li>
          <li class="layui-nav-item" value='feedback.html'><a style='color:black;margin:10px 0 10px 0;'>
              <img src='icon/icon-zc-1.png' style="margin:-5px 0 0 -10px;"> 问题反馈</a></li>
          <li class="layui-nav-item"><a style='color:black;margin:10px 0 10px 0;'>
              <img src='icon/icon-wtfk-1.png' style="margin:-5px 0 0 -10px;"> 注册授权</a></li>
        </ul>
      </div>
    </div>
    <div class="layui-body" style="padding: 20px; background-color: #dee2e6;height: 98%;">
      <div class="body-title">
        <h1>数据总览</h1>
        <p style="margin-top:10px">丰富可交互的可视化软件管理数据概览</p>
      </div>
      <div class="body-main" style="background-color: white;margin-top:20px">
        <div style="height:50%;width:99%;">
          <canvas id="chart-0" width="800" height="450" class="chartjs-render-monitor"
            style="display: block; width: 800px; height: 430px;"></canvas>
        </div>
      </div>
      <div class='date-flex' style="display: flex;justify-content: center;">
        <div style="height:300px;width:32.3%;margin: 20px 0 0 0;background-color: white;">
          <canvas id="chart-1" width="400" height="150" class="chartjs-render-monitor"
            style="display: block; width: 400px; height: 150px;margin-top:20px;"></canvas>
        </div>
        <div style="height:300px;width:33%;margin:20px 20px 0 20px;background-color: white;">
          <canvas id="chart-2" width="400" height="150" class="chartjs-render-monitor"
            style="display: block; width: 400px; height: 150px;margin-top:20px;"></canvas>
        </div>
        <div style="height:300px;width:32.3%;margin:20px 0 0 0;background-color: white;">
          <canvas id="chart-3" width="400" height="150" class="chartjs-render-monitor"
            style="display: block; width: 400px; height: 150px;margin-top:20px;"></canvas>
        </div>
      </div>
    </div>
  </div>
  <script src="layui/layui.js"></script>
  <script src="layui/layui.all.js"></script>
  <script src="js/jquery-3.2.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.bundle.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
  <script src="utils.js"></script>
  <script>
    layui.use(['element', 'form', 'layedit', 'laydate', 'table'], function () {
      var element = layui.element;
      var form = layui.form;
      var layer = layui.layer;
      var layedit = layui.layedit;
      var laydate = layui.laydate;
      var table = layui.table;

      //读取登录session
      var str = sessionStorage.obj;
      if (!str) {
        location.href = 'index.html'
      }
      var sessionobj = $.parseJSON(str);
      var loginuserid = sessionobj[0].userid;
      var logintoken = sessionobj[0].accesstoken;

      //跳转功能授权验证
      $("#ulist").on("click", "li", function () {
        var url = $(this).attr('value')

        $.ajax({
          type: 'POST',
          url: 'http://key.mzsale.cn/api/productsmanagement',
          dataType: 'json',
          data: JSON.stringify({ "vtype": "tokencheck", "item1": loginuserid, "item2": logintoken }),
          async: false,
          success: function (data, status) {
            if (data[0].result == 'success') {
              window.location.href = url
            } else {
              layer.confirm('权限已失效，请重新登录', function (index) {
                sessionStorage.clear();
                location.href = 'index.html'
              })
            }
          }
        })
      });


      var presets = window.chartColors;
      var utils = Samples.utils;
      var inputs = {
        min: 0,
        max: 800000,
        count: 7,
        decimals: 2,
        continuity: 1
      };

      function generateData() {
        return utils.numbers(inputs);
      }

      function generateLabels() {
        return utils.months({ count: inputs.count });
      }

      utils.srand(42);

      var data = {
        labels: generateLabels(),
        datasets: [{
          backgroundColor: utils.transparentize(presets.red),
          borderColor: presets.red,
          data: generateData(),
          label: 'D0'
        }, {
          backgroundColor: utils.transparentize(presets.orange),
          borderColor: presets.orange,
          data: generateData(),
          label: 'D1',
          fill: '-1'
        }, {
          backgroundColor: utils.transparentize(presets.yellow),
          borderColor: presets.yellow,
          data: generateData(),
          label: 'D2',
          fill: '1'
        }, {
          backgroundColor: utils.transparentize(presets.green),
          borderColor: presets.green,
          data: generateData(),
          label: 'D3',
          fill: '-1'
        }, {
          backgroundColor: utils.transparentize(presets.blue),
          borderColor: presets.blue,
          data: generateData(),
          label: 'D4',
          fill: '-1'
        }, {
          backgroundColor: utils.transparentize(presets.grey),
          borderColor: presets.grey,
          data: generateData(),
          label: 'D5',
          fill: '+2'
        }, {
          backgroundColor: utils.transparentize(presets.purple),
          borderColor: presets.purple,
          data: generateData(),
          label: 'D6',
          fill: false
        }, {
          backgroundColor: utils.transparentize(presets.red),
          borderColor: presets.red,
          data: generateData(),
          label: 'D7',
          fill: 8
        }, {
          backgroundColor: utils.transparentize(presets.orange),
          borderColor: presets.orange,
          data: generateData(),
          label: 'D8',
          fill: 'end'
        }]
      };

      var options = {
        maintainAspectRatio: false,
        spanGaps: false,
        elements: {
          line: {
            tension: 0.4
          }
        },
        scales: {
          yAxes: [{
            stacked: true
          }]
        },
        plugins: {
          filler: {
            propagate: true
          },
          'samples-filler-analyser': {
            target: 'chart-analyser'
          }
        }
      };

      var chart0 = new Chart('chart-0', {
        type: 'line',
        data: data,
        options: options
      });

      var chart1 = new Chart('chart-1', {
        type: 'doughnut',
        data: {
          datasets: [{
            data: [
              randomScalingFactor(),
              randomScalingFactor(),
            ],
            backgroundColor: [
              window.chartColors.Skyblue,
              window.chartColors.Navy,
            ],
            label: 'Dataset 1',
          }],
          labels: [
            '',
            '',
          ]
        },
        options: {
          cutoutPercentage: 85,
          responsive: true,
          legend: {
            position: 'bottom',
            labels: {
              fontSize: 5,
              boxWidth: 200,
              padding: 20,
            }
          },
          animation: {
            animateScale: true,
            animateRotate: true
          }
        }
      });


      var chart2 = new Chart('chart-2', {
        type: 'doughnut',
        data: {
          datasets: [{
            data: [
              randomScalingFactor(),
              randomScalingFactor(),
              randomScalingFactor(),
            ],
            backgroundColor: [
              window.chartColors.Skyblue,
              window.chartColors.Navy,
              window.chartColors.Blueviolet,
            ],
            label: 'Dataset 1'
          }],
          labels: [
            '',
            '',
            '',
          ]
        },
        options: {
          cutoutPercentage: 85,
          responsive: true,
          legend: {
            position: 'bottom',
            labels: {
              fontSize: 5,
              boxWidth: 150,
              padding: 20,
            }
          },
          animation: {
            animateScale: true,
            animateRotate: true
          }
        }
      });

      var chart3 = new Chart('chart-3', {
        type: 'doughnut',
        data: {
          datasets: [{
            data: [
              randomScalingFactor(),
              randomScalingFactor(),
              randomScalingFactor(),
              randomScalingFactor(),
            ],
            backgroundColor: [
              window.chartColors.Skyblue,
              window.chartColors.Navy,
              window.chartColors.Blueviolet,
              window.chartColors.Fuchsia
            ],
            label: 'Dataset 1'
          }],
          labels: [
            'Red',
            'Orange',
            'Yellow',
            'Green'
          ]
        },
        options: {
          cutoutPercentage: 85,
          responsive: true,
          legend: {
            position: 'bottom',
          },
          animation: {
            animateScale: true,
            animateRotate: true
          }
        }
      })
    });
  </script>
</body>


</html>